<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="options.css">
</head>

<body>
	<fieldset id="rule_editor">
	<legend>Link cleaning rules</legend>

		<label i18n_title="ignhttp_tooltip"><span i18n_text="ignhttp_title"></span>
			<input type="checkbox" name="ignhttp" value="" />
		</label>

		<fieldset class="example">
			<input type="checkbox" id="show_URL_legend" class="toggle noautosave" />

			<legend>URL example <label for="show_URL_legend">
					<span class="enabled">Hide</span><span class="disabled">Show</span> legend
			</label></legend>
			<p class="URL">
				<span class="protocol" i18n_title="URL_protocol">https</span>://<span class="subdomain" i18n_title="URL_subdomain">addons.</span><span class="domain" i18n_title="URL_domain">mozilla.<span class="suffix" i18n_title="URL_suffix">org</span></span><span class="path" i18n_title="URL_path">/en-GB/firefox/addon/clean-links-webext/reviews/</span><span class="query" i18n_title="URL_query">?<span class="parameter" i18n_title="URL_parameter">score</span>=5</span>
			</p>

			<dl class="enabled">
				<dt class="protocol">https</dt> <dd i18n_text="URL_protocol"></dd>
				<dt class="suffix">org</dt> <dd>
					<a i18n_text="URL_suffix" href="https://publicsuffix.org/"></a>
					<span i18n_text="URL_tld"></span>
				</dd>
				<dt class="domain">mozilla.org</dt> <dd i18n_text="URL_domain"></dd>
				<dt class="subdomain">addons.</dt> <dd i18n_text="URL_subdomain"></dd>
				<dt class="fqdn">addons.mozilla.org</dt> <dd i18n_text="URL_fqdn"></dd>
				<dt class="path">/en-GB/firefox/addon/clean-links-webext/reviews/</dt> <dd i18n_text="URL_path"></dd>
				<dt class="query">?score=5</dt> <dd i18n_text="URL_query"></dd>
				<dt class="parameter">score</dt> <dd i18n_text="URL_parameter"></dd>
			</dl>
		</fieldset>

		<h4 id="rule_legend"><label for="rule_selector">Rule to edit:</label>
			<input type="text" id="rule_filter" placeholder="filter rules" class="noautosave" />
			<button id="remove_rule" disabled="disabled">❌ Delete rule</button>
		</h4>
		<p>
			<select id="rule_selector" name="rule" size="2">
				<option value="{}" selected="selected">-- New rule --</option>
			</select>
		</p>

		<fieldset>
			<legend>URLs matched
				<span class="help">
					<span class="tooltip">?</span>
					<span class="tooltiptext">
						Defines for which URLs cleaning actions are taken or prevented.<br />
						The <strong>domain suffix</strong> (see legend) can be either a domain or * to catch domains with multiple TLDs
						such as google or amazon. The rest of the <strong>domain</strong> must match exactly, except for the optional inclusion
						of subdomains.<br />
						The <strong>path</strong> is matched as a <a
							href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions">Regular
							Expression</a>. Leave empty to match all paths, and set to / to match an empty path.
					</span>
				</span>
			</legend>

			<p><label for="domain_edit">Domain</label><label for="suffix_edit">Suffix</label><br />
				<input type="text" name="domain" id="domain_edit" value="" />.<input type="text" name="suffix" id="suffix_edit" value="" />
			</p>
			<label><span>Match subdomains</span>
				<input type="checkbox" name="subdomains" checked="checked" />
			</label>
			<label><span>Path</span>
				<span class="parsing_error" id="path_error"></span>
				<br /><input type="text" name="path" value="" />
			</label>
		</fieldset>

		<fieldset>
			<legend>Cleaning actions
				<span class="help">
					<span class="tooltip">?</span>
					<span class="tooltiptext">
						CleanLinks directly redirects URLs to any embedded URL inside the path, and also supports removing
						tracking data from URLs.<br />
						Here we display the rules for the matched URL, as well as inherited rules from broader matches
						(on a greyed background).
					</span>
				</span>
			</legend>
			<p></p>

			<p class="editor" id="rewrite_editor">
				<span class="parsing_error" id="search_edit_error"></span>
				<label>
					<span>Remove from path:</span>
					<input type="text" name="search_edit" id="search_edit" value="" />
				</label>
				<label>
					<span>Replace with:</span>
					<input type="text" name="replace_edit" name="replace_edit" value="" />
				</label>

				<label><span>Replace all occurrences</span>
					<input type="checkbox" name="rewrite_repeat" checked="checked" />
				</label>

				<label><span>Ignore case</span>
					<input type="checkbox" name="rewrite_icase" checked="checked" />
				</label>

				<button class="ok">Add</button><button class="cancel">Cancel</button>
			</p>

			<p class="editor" id="remove_editor">
				<label>
					<span>Add to removed query parameters:</span>
					<span class="parsing_error" id="remove_edit_error"></span>
					<br /><input type="text" name="remove_edit" value="" />
				</label>

				<button class="ok">Add</button><button class="cancel">Cancel</button>
			</p>

			<p class="editor" id="whitelist_editor">
				<label>
					<span>Add to whitelisted query parameters:</span>
					<span class="parsing_error" id="whitelist_edit_error"></span>
					<br /><input type="text" name="whitelist_edit" value="" />
				</label>

				<button class="ok">Add</button><button class="cancel">Cancel</button>
			</p>


			<label for="remove_add">Remove query parameters:</label>
			<span id="remove_itemlist" class="itemlist"></span>
			<span id="remove_inheritlist" class="inheritlist"></span>
			<button id="remove_add" class="add_to_list" title="Add to the list">+</button>

			<label for="whitelist_add">Whitelist query parameters (prevent removing and allow embedded URL):</label>
			<span id="whitelist_itemlist" class="itemlist"></span>
			<span id="whitelist_inheritlist" class="inheritlist"></span>
			<button id="whitelist_add" class="add_to_list" title="Add to the list">+</button>

			<label><span>Allow URL embedded inside path</span>
				<input type="checkbox" name="whitelist_path" value="" />
			</label>

			<label for="rewrite_add">Remove or replace in path:</label>
			<span id="rewrite_itemlist" class="itemlist"></span>
			<span id="rewrite_inheritlist" class="inheritlist"></span>
			<button id="rewrite_add" class="add_to_list" title="Add to the list">+</button>

		</fieldset>
	</fieldset>

	<fieldset>
		<legend>Features</legend>
		<label i18n_title="switch_to_tab_tooltip"><span i18n_text="switch_to_tab_title"></span>
			<input type="checkbox" name="switch_to_tab" value="" />
		</label>
		<label i18n_title="cbc_tooltip"><span i18n_text="cbc_title"></span>
			<input type="checkbox" name="cbc" value="" />
		</label>
		<label i18n_title="progltr_tooltip"><span i18n_text="progltr_title"></span>
			<input type="checkbox" name="progltr" value="" />
		</label>
		<label i18n_title="httpall_tooltip"><span i18n_text="httpall_title"></span>
			<input type="checkbox" name="httpall" value="" />
		</label>
		<label i18n_title="gotarget_tooltip"><span i18n_text="gotarget_title"></span>
			<input type="checkbox" name="gotarget" value="" />
		</label>
		<label i18n_title="textcl_tooltip"><span i18n_text="textcl_title"></span>
			<input type="checkbox" name="textcl" value="" />
		</label>
		<label><span i18n_text="cltrack_title"></span>
			<input type="checkbox" name="cltrack" value="" />
		</label>
	</fieldset>

	<fieldset>
		<legend>Display</legend>
		<label><span i18n_text="highlight_title"></span>
			<input type="checkbox" name="highlight" value="" />
		</label>
		<label i18n_title="hlstyle_content"><span i18n_text="hlstyle_title"></span>
			<br /><input type="text" name="hlstyle" i18n_title="hlstyle_emptytext" />
		</label>
	</fieldset>

	<fieldset id="reset_buttons">
		<legend>Rules</legend>
		<p><button name="export_rules">Export rules</button></p>
		<p><button name="import_rules">Import rules</button><input type="file" accept="application/json" id="import_rules" /></p>
		<p><button name="reset_rules" i18n_text="reset_rules_label" i18n_title="reset_rules_tooltip"></button></p>
		<p><button name="reset_options" i18n_text="reset_options_label" i18n_title="reset_options_tooltip"></button></p>
	</fieldset>

	<script src="/modules/common.js"></script>
	<script src="/modules/punycode.js"></script>
	<script src="/modules/publicsuffixlist.js"></script>
	<script src="/modules/rules.js"></script>
	<script src="/modules/cleanlink.js"></script>
	<script src="options.js"></script>
</body>

</html>
